(()=>{"use strict";var e={112:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var i=Object.getOwnPropertyDescriptor(t,o);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,i)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;const s=r(o(496));let a=[];function c(e){let t=s.window.activeTextEditor;if(!t)return;const o=t.document.getText(),n=t.selection.active;let i=[],r=[],c=[],l=[],d=[],f=!0,u=!0,p=0,g=-1;const v=/\{%-?\s*(ifversion|elsif|else|endif)\s+([^%]*)%\}/g;let h;for(;h=v.exec(o);){p++;const e=h.index,o=t.document.positionAt(e),s=h.index+h[0].length,a=t.document.positionAt(s);f&&n.isBefore(o.translate({characterDelta:1}))&&(f=!1),u&&n.isBefore(a)&&(u=!1),"ifversion"===h[1]?(g++,d[g]=p,f&&(l[g]=p,g>0?(r[g]="AND "+h[2],c[g]="AND NOT "+h[2]):(r[g]=h[2],c[g]="NOT "+h[2]))):"elsif"===h[1]&&f?(l[g]=p,g>0&&(r[g]="AND "),r[g]+=h[2],c[g]+="AND NOT "+h[2]):"else"===h[1]&&f?(l[g]=p,g>0&&(r[g]="AND "),r[g]=c[g]):"endif"===h[1]&&u&&(c.pop(),r.pop(),l.pop()),i.push({tagID:p,tagSet:d[g],positionVersionTagStart:o,positionVersionTagEnd:a}),"endif"===h[1]&&g--}l.length>0&&function(e,t,o){let n=s.workspace.getConfiguration("version-identifier").get("colorPairs",[]),i=0;o.forEach((o=>{let r=n[i%n.length],c=s.window.createTextEditorDecorationType({backgroundColor:r.backgroundColor,color:r.color});a.push(c);let l=[],d=t.find((e=>(null==e?void 0:e.tagID)===o)),f=null==d?void 0:d.tagSet;t.filter((e=>e.tagSet===f)).forEach((e=>{const t=new s.Range(e.positionVersionTagStart,e.positionVersionTagEnd);l.push({range:t})})),e&&e.setDecorations(c,l),i++}))}(t,i,l),function(e,t,o){const n=` at the cursor position (line ${t.line+1}, character ${t.character+1} ) `;let i="";if(0===o.length)i="There is no inline versioning "+n+".";else{i="The inline versioning "+n+" is:\n\n";for(let e of o)i+=e+"\n"}e?s.window.showInformationMessage(i,{modal:!0}):s.window.showInformationMessage(i,"OK")}(e,n,r)}t.activate=function(e){let t=s.commands.registerCommand("version-identifier.runExtensionModal",(()=>{c(!0)})),o=s.commands.registerCommand("version-identifier.runExtensionToast",(()=>{c(!1)})),n=s.commands.registerCommand("version-identifier.removeDecorations",(()=>{a.forEach((e=>e.dispose())),a=[]})),i=s.window.onDidChangeTextEditorSelection((()=>{a.forEach((e=>e.dispose())),a=[]}));e.subscriptions.push(t,o,n,i)},t.deactivate=function(){a.forEach((e=>e.dispose())),a=[]}},496:e=>{e.exports=require("vscode")}},t={},o=function o(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,o),r.exports}(112);module.exports=o})();